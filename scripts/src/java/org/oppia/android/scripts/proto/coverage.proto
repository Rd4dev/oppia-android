syntax = "proto3";

package proto;

option java_package = "org.oppia.android.scripts.proto";
option java_multiple_files = true;

message CoverageReport {
  string bazel_test_target = 1;
  repeated CoveredFile covered_file = 2;
}

message CoveredFile {
  string file_path = 1;
  string file_sha1_hash = 2;
  repeated CoveredLine covered_line = 3;
  int32 lines_found = 4;
  int32 lines_hit = 5;
  repeated FunctionCoverage function_coverage = 6;
  int32 functions_found = 7;
  int32 functions_hit = 8;
  repeated BranchCoverage branch_coverage = 9;
  int32 branches_found = 10;
  int32 branches_hit = 11;
}

message CoveredLine {
  int32 line_number = 1;
  Coverage coverage = 2;
}

message BranchCoverage {
  int32 line_number = 1;
  optional int32 block_number = 2;
  optional int32 branch_number = 3;
  optional int32 hit_count = 4;
  Coverage coverage = 5;
}

message FunctionCoverage {
  int32 line_number = 1;
  string function_name = 2;
  optional int32 execution_count = 3;
  Coverage coverage = 4;
}

enum Coverage {
  UNSPECIFIED = 0;
  FULL = 1;
  NONE = 2;
}
